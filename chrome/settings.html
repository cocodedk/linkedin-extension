<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>LinkedIn Lead Exporter Settings</title>
    <link rel="stylesheet" href="settings-page.css" />
  </head>
  <body>
    <header class="page-header">
      <h1>LinkedIn Lead Exporter Settings</h1>
      <div class="header-actions">
        <button id="open-popup-btn" type="button">üîô Open Popup</button>
        <button id="open-leads-btn" type="button">üìã View Leads</button>
      </div>
    </header>
    <main>
      <section class="settings-panel">
        <h2>Credentials</h2>
        <div class="settings-row">
          <label>
            OpenAI API Key
            <input id="api-key" type="password" placeholder="sk-..." autocomplete="off" />
          </label>
          <button id="save-api-key-btn" type="button">üíæ Save Key</button>
        </div>
      </section>

      <section class="settings-panel">
        <h2>Automation Settings</h2>
        <p class="settings-summary">
          Tune delays and concurrency to balance speed with LinkedIn safety.
        </p>
        <form id="settings-form" class="settings-form">
          <fieldset>
            <legend>Deep Scan</legend>
            <div class="settings-grid">
              <label for="setting-deep-scan-profile-delay">
                Profile Load Delay (ms)
                <input
                  id="setting-deep-scan-profile-delay"
                  type="number"
                  min="0"
                  step="100"
                  inputmode="numeric"
                />
              </label>
              <label for="setting-deep-scan-batch-size">
                Parallel Profile Tabs
                <input
                  id="setting-deep-scan-batch-size"
                  type="number"
                  min="1"
                  max="10"
                  step="1"
                  inputmode="numeric"
                />
              </label>
              <label for="setting-deep-scan-batch-delay">
                Delay Between Batches (ms)
                <input
                  id="setting-deep-scan-batch-delay"
                  type="number"
                  min="0"
                  step="100"
                  inputmode="numeric"
                />
              </label>
            </div>
          </fieldset>

          <fieldset>
            <legend>Deep Scan ALL</legend>
            <div class="settings-grid">
              <label for="setting-deep-scan-all-max-pages">
                Max Pages
                <input
                  id="setting-deep-scan-all-max-pages"
                  type="number"
                  min="1"
                  max="500"
                  step="1"
                  inputmode="numeric"
                />
              </label>
              <label for="setting-deep-scan-all-page-delay">
                Delay Between Pages (ms)
                <input
                  id="setting-deep-scan-all-page-delay"
                  type="number"
                  min="0"
                  step="100"
                  inputmode="numeric"
                />
              </label>
            </div>
          </fieldset>

          <fieldset>
            <legend>Connect Automation</legend>
            <div class="settings-grid settings-grid--connect">
              <label class="toggle" for="setting-connect-enabled">
                <input
                  id="setting-connect-enabled"
                  type="checkbox"
                />
                <span>Enable Connect Automation</span>
              </label>
              <label for="setting-connect-initial-delay">
                Initial Wait Before Connect (ms)
                <input
                  id="setting-connect-initial-delay"
                  type="number"
                  min="0"
                  step="100"
                  inputmode="numeric"
                />
              </label>
              <label for="setting-connect-confirm-delay">
                Delay Before ‚ÄúAdd Note‚Äù (ms)
                <input
                  id="setting-connect-confirm-delay"
                  type="number"
                  min="0"
                  step="100"
                  inputmode="numeric"
                />
              </label>
              <label for="setting-connect-message-delay">
                Delay Before Typing (ms)
                <input
                  id="setting-connect-message-delay"
                  type="number"
                  min="0"
                  step="100"
                  inputmode="numeric"
                />
              </label>
              <label for="setting-connect-send-delay">
                Delay Before Send (ms)
                <input
                  id="setting-connect-send-delay"
                  type="number"
                  min="0"
                  step="50"
                  inputmode="numeric"
                />
              </label>
              <label for="setting-connect-typing-min-delay">
                Typing Min Delay (ms)
                <input
                  id="setting-connect-typing-min-delay"
                  type="number"
                  min="0"
                  step="10"
                  inputmode="numeric"
                />
              </label>
              <label for="setting-connect-typing-max-delay">
                Typing Max Delay (ms)
                <input
                  id="setting-connect-typing-max-delay"
                  type="number"
                  min="0"
                  step="10"
                  inputmode="numeric"
                />
              </label>
              <label class="settings-grid__full" for="setting-connect-message">
                Connection Message
                <textarea
                  id="setting-connect-message"
                  rows="4"
                  placeholder="Hi, I'd love to connect and stay in touch."
                ></textarea>
              </label>
            </div>
            <p class="settings-help">
              After enabling, use the Auto Connect button in the popup to wait about 20 seconds on the profile, open the connect dialog, type your message with human-like timing, and send it.
            </p>
          </fieldset>

          <fieldset>
            <legend>Virk Enrichment</legend>
            <div class="settings-grid">
              <label for="setting-virk-parallel-tabs">
                Parallel Virk Tabs
                <input
                  id="setting-virk-parallel-tabs"
                  type="number"
                  min="1"
                  max="10"
                  step="1"
                  inputmode="numeric"
                />
              </label>
              <label for="setting-virk-warmup-delay">
                Tab Warmup Delay (ms)
                <input
                  id="setting-virk-warmup-delay"
                  type="number"
                  min="0"
                  step="100"
                  inputmode="numeric"
                />
              </label>
              <label for="setting-virk-search-delay">
                Search Delay (ms)
                <input
                  id="setting-virk-search-delay"
                  type="number"
                  min="0"
                  step="100"
                  inputmode="numeric"
                />
              </label>
              <label for="setting-virk-navigation-delay">
                Navigation Delay (ms)
                <input
                  id="setting-virk-navigation-delay"
                  type="number"
                  min="0"
                  step="100"
                  inputmode="numeric"
                />
              </label>
              <label for="setting-virk-page-load-delay">
                Detail Page Delay (ms)
                <input
                  id="setting-virk-page-load-delay"
                  type="number"
                  min="0"
                  step="100"
                  inputmode="numeric"
                />
              </label>
            </div>
          </fieldset>

          <div class="settings-actions">
            <button id="reset-settings-btn" type="button">‚ôªÔ∏è Reset Defaults</button>
            <button id="save-settings-btn" type="submit">‚úÖ Save Settings</button>
          </div>
        </form>
      </section>

      <section class="help-panel" aria-labelledby="help-title">
        <h2 id="help-title">Help &amp; Tips</h2>
        <p class="help-summary">
          Quick explanations of each control and how to combine the extension‚Äôs features.
        </p>
        <div class="help-grid">
          <article class="help-card">
            <h3>Credentials</h3>
            <p>
              Save your OpenAI API key to unlock AI lead scoring inside the popup. Leave the field empty if you do
              not want any calls made to OpenAI.
            </p>
          </article>
          <article class="help-card">
            <h3>Deep Scan</h3>
            <p>
              Opens individual profiles in background tabs to gather detailed company data. Increase delays if you
              see LinkedIn warnings or want to reduce CPU usage.
            </p>
          </article>
          <article class="help-card">
            <h3>Deep Scan ALL</h3>
            <p>
              Walks through multiple pages of search results automatically. Use the page delay to space out requests
              and the page limit to keep runs manageable.
            </p>
          </article>
          <article class="help-card">
            <h3>Connect Automation</h3>
            <p>
              When enabled, the popup‚Äôs Auto Connect button waits on a profile, opens the connect dialogue, types your
              note with human-like pauses, and sends it. Longer waits are safer on new accounts.
            </p>
          </article>
          <article class="help-card">
            <h3>Virk Enrichment</h3>
            <p>
              Matches leads against the Danish CVR register via virk.dk. Parallel tabs finish faster but may trigger
              rate limits‚Äîdial them down if pages stop loading.
            </p>
          </article>
          <article class="help-card">
            <h3>Suggested Workflow</h3>
            <p>
              In the popup, start with Scan Results to capture leads, run Deep Scan for richer data, optionally add
              Virk enrichment, then review everything on the Leads page and export CSV or JSON.
            </p>
          </article>
        </div>
      </section>

      <p id="status" role="status" aria-live="polite"></p>
    </main>

    <script type="module" src="settings-page.js"></script>
  </body>
</html>
